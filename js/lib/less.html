<!DOCTYPE html>
<html>
<head>
<script src="less.js"></script>
<script>
less.env = 'development';
</script>
</head>
<body>

<div id="form">
<div id="fields">
<input type="text" id="first"/><br/>
</div>
<label for="compress">Compress?</label><input type="checkbox" id="compress"/>
<button id="generate">Generate</button>
</div>

<pre id="style" style="font-family:monospace;"></pre>

<script src="jquery.min.js"></script>
<script>
$(document).ready(function () {
  $('#first').val('core.less');
  $('#generate').live('click', function () {
    var style = '';
    $('#form input[type=text]').each(function () {
      $('head').prepend('<link href="' + $(this).val() + '" type="text/css" rel="stylesheet/less">');
    });
    less.rebuild();
    $('#form').hide();
    $('style').each(function () {
      style += $(this).text();
      $(this).remove();
    });
    if ($('#compress').attr('checked')) {
      style = style.replace(/\n/g, '').replace(/}/g, '}\n').replace(/\)\s*{\s*/g, ') {\n ').replace(/  /g, ' ');
    }
    $('#style').text('/* Do not edit this file directly - it will be overwritten during the build process. */\n\n' + style);
  }).trigger('click');
});
</script>
</body>
</html>